<!doctype html>
<html lang="no">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Borregaard Dashboard - Arbeidsrettet lageroptimalisering"
    />
    <title>Borregaard Dashboard</title>
    <link rel="stylesheet" href="css/dashboard.css" />
  </head>
  <body>
    <div class="container">
      <!-- HEADER -->
      <header class="main-header">
        <h1>Borregaard Dashboard</h1>
        <p class="subtitle">Arbeidsrettet beslutningst√∏tte for lagerstyring</p>
      </header>

      <!-- FILE UPLOAD SECTION -->
      <section class="upload-section">
        <h2>Last opp data</h2>
        <div class="upload-grid four-columns">
          <div class="upload-item">
            <label for="inventoryFile">
              <span class="file-label">Lagerbeholdning</span>
              <span class="file-required">(p√•krevd)</span>
            </label>
            <input type="file" id="inventoryFile" accept=".xlsx,.csv" />
            <span class="file-hint">Saldo, reservert, lokasjon</span>
          </div>
          <div class="upload-item">
            <label for="ordersInFile">
              <span class="file-label">Bestillinger</span>
              <span class="file-required">(p√•krevd)</span>
            </label>
            <input type="file" id="ordersInFile" accept=".xlsx,.csv" />
            <span class="file-hint">Innkj√∏p til Borregaard</span>
          </div>
          <div class="upload-item">
            <label for="ordersOutFile">
              <span class="file-label">Fakturert</span>
              <span class="file-required">(p√•krevd)</span>
            </label>
            <input type="file" id="ordersOutFile" accept=".xlsx,.csv" />
            <span class="file-hint">Salgshistorikk ut</span>
          </div>
          <div class="upload-item optional">
            <label for="saNumberFile">
              <span class="file-label">SA-Nummer</span>
              <span class="file-optional">(valgfri)</span>
            </label>
            <input type="file" id="saNumberFile" accept=".xlsx,.csv" />
            <span class="file-hint">Tools art.nr ‚Üî SA-nummer</span>
          </div>
        </div>
        <div class="upload-actions">
          <button id="uploadBtn" class="btn-primary">Analyser data</button>
          <button id="clearBtn" class="btn-secondary">Nullstill</button>
        </div>
        <div id="uploadStatus" class="status-message"></div>
      </section>

      <!-- SUMMARY CARDS -->
      <section class="summary-cards">
        <div class="summary-card">
          <div class="card-value" id="totalItems">-</div>
          <div class="card-label">Totalt artikler</div>
        </div>
        <div class="summary-card card-critical">
          <div class="card-value" id="criticalCount">-</div>
          <div class="card-label">Kritiske</div>
        </div>
        <div class="summary-card card-warning">
          <div class="card-value" id="warningCount">-</div>
          <div class="card-label">Advarsler</div>
        </div>
        <div class="summary-card card-ok">
          <div class="card-value" id="saNumberCoverage">-</div>
          <div class="card-label">SA-dekning</div>
        </div>
        <div class="summary-card">
          <div class="card-value" id="incomingCount">-</div>
          <div class="card-label">P√• vei inn</div>
        </div>
      </section>

      <!-- TAB NAVIGATION - 4 ARBEIDSMODUSER -->
      <nav class="tab-navigation">
        <button class="tab active" data-module="overview">
          <span class="tab-icon">1</span>
          <span class="tab-label">Oversikt</span>
          <span class="tab-desc">Daglig kontroll</span>
        </button>
        <button class="tab" data-module="demand">
          <span class="tab-icon">2</span>
          <span class="tab-label">Ettersp√∏rsel</span>
          <span class="tab-desc">Salg & m√∏nstre</span>
        </button>
        <button class="tab" data-module="assortment">
          <span class="tab-icon">3</span>
          <span class="tab-label">Sortiment</span>
          <span class="tab-desc">Rydding</span>
        </button>
        <button class="tab" data-module="planning">
          <span class="tab-icon">4</span>
          <span class="tab-label">Planlegging</span>
          <span class="tab-desc">Forberedelser</span>
        </button>
      </nav>

      <!-- MODULE CONTENT AREA -->
      <main id="moduleContent" class="module-content">
        <div class="placeholder-content">
          <div class="placeholder-icon">üìä</div>
          <h3>Last opp data for √• starte</h3>
          <p>Last opp de 3 p√•krevde filene for √• begynne analysen.</p>
          <ul class="file-checklist">
            <li><strong>Lagerbeholdning.xlsx</strong> - N√•v√¶rende saldo og lokasjoner</li>
            <li><strong>Bestillinger.xlsx</strong> - √Öpne innkj√∏psordrer</li>
            <li><strong>Fakturert.xlsx</strong> - Salgshistorikk</li>
            <li class="optional"><strong>SA-Nummer.xlsx</strong> - Valgfri koblingsfil</li>
          </ul>
          <p class="text-muted">St√∏ttede formater: .xlsx, .csv</p>
        </div>
      </main>

      <!-- FOOTER -->
      <footer>
        <p>Borregaard Dashboard v4.0 - Arbeidsrettet beslutningst√∏tte</p>
        <p class="text-muted">Lokal databehandling - Ingen data sendes til skyen</p>
      </footer>
    </div>

    <!-- External Libraries -->
    <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>

    <!-- Core Data Handling -->
    <script src="js/dataLoader.js"></script>
    <script src="js/models/unifiedItem.js"></script>
    <script src="js/dataProcessor.js"></script>

    <!-- Work Modes -->
    <script src="js/workModes/overview.js"></script>
    <script src="js/workModes/demand.js"></script>
    <script src="js/workModes/assortment.js"></script>
    <script src="js/workModes/planning.js"></script>

    <!-- Legacy modules (for compatibility during transition) -->
    <script src="js/topSellers.js"></script>
    <script src="js/orderSuggestions.js"></script>
    <script src="js/slowMovers.js"></script>
    <script src="js/inactiveItems.js"></script>

    <!-- Main Application Controller -->
    <script src="js/app.js"></script>
  </body>
</html>
